<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Source: utils/utils.js</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">

    <h1 class="page-title">Source: utils/utils.js</h1>

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>/**
 * Agrupa los elementos de un array según una función de selección.
 * @param {Array} array - Lista de elementos a agrupar.
 * @param {Function} selectorFn -Función que indica por qué propiedad agrupar.
 * 
 */

export function groupBy(array, selectorFn) {
    const grouped = {};
    // Recorremos cada elemento del array
    for (const item of array) {
        // Obtenemos la clave del grupo usando la función pasada como parámetro
        const key = selectorFn(item);
        // Si el grupo aún no existe dentro del objeto, lo inicializamos como un array vacío
        if (!grouped[key]) {
            grouped[key] = [];
        }
        // Añadimos el elemento actual dentro del grupo correspondiente
        grouped[key].push(item);
        console.log(grouped)
    }

    return grouped;
}

/**
 * Formateador de números a euros según la convención española.
 * Intl.NumberFormat() clase de JS para formatear números
 * @example
 * EUR.format(1500); // "1.500,00 €"
 */
export const EUR = new Intl.NumberFormat('es-ES', {
  style: 'currency',
  currency: 'EUR'
});


/**
  * Permite mostrar u ocultar un elemento (escena) de la pantalla.
  * Selecciona todos los elementos con la clase scene y les remueve la clase active
  * Selecciona el elemento con el id especificado y le añade la clase active
  * @param {number} id - identificador del elemento.
  */
export function showScene(id) {
  document.querySelectorAll('.scene').forEach(
    element => element.classList.remove('active')
  );
  document.getElementById(id).classList.add('active');
}


/**
 * Función de utilidad para mapear el nombre de un ítem o enemigo a la ruta de su imagen.
 * @function obtenerImagen
 * @param {string} nombre - El nombre del ítem o enemigo.
 * @returns {string} La ruta del archivo de imagen correspondiente, o una ruta por defecto si no se encuentra.
 */
export function obtenerImagen(nombre) {
    const imagenes = {
        "Baya Aranja": "./src/image/Bayas_Aranja.png",
        "Superpoción": "./src/image/Super_pocion.png",
        "Hiperpoción": "./src/image/Hiperpocion.png",
        "Zinc": "./src/image/Zinc.png",
        "Proteína": "./src/image/proteina.png",
        "Placa Acero": "./src/image/placa_acero.png",
        "Imán": "./src/image/Iman.png",
        "Bola Luminosa": "./src/image/bola_luminosa_.png",
        "Piedra Trueno": "./src/image/piedra_trueno.png",
        "Pokeball": "./src/image/pokebolla.png",
        "Quilava": "./src/image/Quilava.png",
        "Raticate": "./src/image/Raticate.png",
        "Sneasel": "./src/image/Sneasel.png",
        "Pyroar": "./src/image/Pyroar.png",
    };

    // Si no existe imagen, usa una genérica
    return imagenes[nombre] || "./src/image/default.png";
}


/**
 * Ejecuta una animación visual de monedas cayendo en la pantalla.
 * * Genera tres elementos de imagen en posiciones horizontales fijas (25%, 50%, 75%),
 * los inserta en el DOM y activa la animación CSS definida en la clase 'moneda-animada'.
 * * @function animacionMonedas
 * @description Crea un efecto visual de recompensa. Incluye una limpieza automática 
 * de los elementos del DOM tras 3.5 segundos para optimizar el rendimiento.
 */
export function animacionMonedas(){
  const monedas = `
    &lt;img src="./src/image/moneda.png" alt="moneda" class="moneda-animada" style="left: 25%;">
    &lt;img src="./src/image/moneda.png" alt="moneda" class="moneda-animada" style="left: 50%;">
    &lt;img src="./src/image/moneda.png" alt="moneda" class="moneda-animada" style="left: 75%;">
  `
  //Insertamos al final del body
  document.body.insertAdjacentHTML('beforeend', monedas);

  //Eliminamos los elementos del DOM después de que termine la animación 3s
  setTimeout(() => {
    const elementos = document.querySelectorAll('.moneda-animada');
    elementos.forEach(el => el.remove());
  }, 3500);

}


/**
 * Actualiza el texto del monedero en el DOM.
 * @param {Object} personaje - El objeto del jugador que contiene la propiedad dinero.
 * @param {number} [costeCesta=0] - Cantidad a restar visualmente del total.
 */
export function refrescarVisualMonedero(jugador, costeCesta = 0) {
    const displayDinero = document.getElementById("dinero-actual");
    
    console.log("Dinero actual del jugador:", jugador.dinero);
    
    if (displayDinero &amp;&amp; jugador) {
        displayDinero.textContent = jugador.dinero - costeCesta;
    }
}


/**
 * Crea y ejecuta una animación visual de un carrito de compras volando hacia el inventario.
 * La animación nace en las coordenadas especificadas (donde el usuario hizo clic)
 * y el elemento se elimina automáticamente del DOM al finalizar.
 * * @param {number} x - La coordenada horizontal (píxeles) donde se originará la animación (e.clientX).
 * @param {number} y - La coordenada vertical (píxeles) donde se originará la animación (e.clientY).
 * @returns {void} No retorna ningún valor.
 */
export function animarCarrito(x, y){
  const carrito = document.createElement("img");
  carrito.src = "./src/image/Carrito.png";
  carrito.className = "carrito-flotante";

  carrito.style.left = `${x}px`;
  carrito.style.top = `${y}px`;

  document.body.appendChild(carrito);

  //Lo elimino del DOM cuando termine la animacion
  setTimeout( () => {
    carrito.remove();
  }, 800);
}
</code></pre>
        </article>
    </section>




</div>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Classes</h3><ul><li><a href="Enemigo.html">Enemigo</a></li><li><a href="Jefe.html">Jefe</a></li><li><a href="Jugador.html">Jugador</a></li><li><a href="Producto.html">Producto</a></li></ul><h3>Global</h3><ul><li><a href="global.html#EUR">EUR</a></li><li><a href="global.html#agruparPorNivel">agruparPorNivel</a></li><li><a href="global.html#animacionMonedas">animacionMonedas</a></li><li><a href="global.html#animarCarrito">animarCarrito</a></li><li><a href="global.html#aplicarDescuentoPorRareza">aplicarDescuentoPorRareza</a></li><li><a href="global.html#batalla">batalla</a></li><li><a href="global.html#buscarProducto">buscarProducto</a></li><li><a href="global.html#escena1">escena1</a></li><li><a href="global.html#escena2">escena2</a></li><li><a href="global.html#escena3">escena3</a></li><li><a href="global.html#escena4">escena4</a></li><li><a href="global.html#escena5">escena5</a></li><li><a href="global.html#escena6">escena6</a></li><li><a href="global.html#escena7">escena7</a></li><li><a href="global.html#escena8">escena8</a></li><li><a href="global.html#filtrarPorRareza">filtrarPorRareza</a></li><li><a href="global.html#groupBy">groupBy</a></li><li><a href="global.html#iniciarJuego">iniciarJuego</a></li><li><a href="global.html#mercado">mercado</a></li><li><a href="global.html#obtenerImagen">obtenerImagen</a></li><li><a href="global.html#obtenerTodasLasRarezas">obtenerTodasLasRarezas</a></li><li><a href="global.html#refrescarVisualMonedero">refrescarVisualMonedero</a></li><li><a href="global.html#showScene">showScene</a></li></ul>
</nav>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc/jsdoc">JSDoc 4.0.5</a> on Wed Jan 14 2026 10:30:57 GMT+0100 (hora estándar de Europa central)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>
